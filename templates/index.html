<!DOCTYPE html>
  <head>
    <title>{{ title }}</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script>
    <script type="text/javascript" charset="utf-8">
      $(document).ready(function() {
        $("#connected").html("Maybe");

        var socket = io.connect();

        socket.on('connect', function() {
          console.log("--->Connected to Server");
          $("#connected").html("Yes");
          <!-- $("#connected").html("Yes"); -->
          socket.emit('my event', {data: 'I\'m connected!'});
        });

        socket.on('disconnect', function() {
          console.log("--->Disconnected from the Server");
          $("#connected").html("No");
          socket.emit('my event', {data: 'I\'ve become unconnected'});
        });
        
        socket.on('esp_data', function(message) {
          console.log("--->received data");
          $("#little_guy").html("received: " + message.data);
        });

      } );
    </script>
  </head>
  <body>
    <h1>Hello World!</h1>
    <p>Connected: <span id="connected">...</span></p>
    <h2>The magic number is {{ num }}</h2>
    <h3>little device sent: <span id="little_guy"> initial: {{ data }}</span></h3>
    <p>the total number of times we've been here: {{ big_num }}</p>
  </body>
</html>
